### Overview

There are two main responsibilities of the Bitcoin Trustee nodes:

* For Bitcoin: generates and controls a hot multiple signature address and a cold multiple signature address based on the current Bitcoin trust's public key information **registered on the chain**
    * Bitcoin multi-signature process:
        * ChainX multi-signature withdrawal: use a ChainX wallet or write your own tools using the SDK to follow the multi-signature process
        * Sign outside the chain transfer: use the ChainX preparation tool [ChainX-multisig-verify-script] (https://github.com/chainx-org/chainx-multisig-verify-script), it is strongly recommended that node design sign of bitcoins tools to conform to his needs.
    * Particularity of Bitcoin multi-signature address:
        * Due to the limitation of Bitcoin script, in fact, a multiple signature address corresponds to a 'redeemScript', and the corresponding 'redeemScript' is required to be provided when executing the multiple signature process, for example:

        ```json
        {
          "address": "2N24ytjE3MtkMpYWo8LrTfnkbpyQQQQQQQQ", 
          "redeemScript": "0x532102a79800dfed17ad4c78c52797adafasdfasd69421080f42d27790ee2103eceasdfasdfasda3e62ef6b2f6ad9774489e9aff1c8bc684d87dfdasfasdf2dd162e8d8614a4afbb8e2eb14eddf4036042b35asdfasdfd8ac4d3e055eae7551427487e281e3efba618bdd395f2f54ae"
        }
        ```
    * 'redeemScript' is generated at the same time when multiple signed addresses are generated. The 'redeemScript' corresponding to hot and cold multiple signed addresses is recorded on the ChainX chain, which can be obtained through the corresponding RPC interface.

* For ChainX: ChainX will generate a corresponding ChainX multi-signature address for the current session of the trust, which is used to control the functions of the Bitcoin Trustee, such as setting the Bitcoin withdrawal fee and the Bitcoin transition.

    * For the multi-sign process of ChainX, refer to [multi-sign module](sign-module), and use the tool 'multisig-tool' provided by ChainX.

The Other:

* for Bitcoin, the oversigned address is actually generated by everyone's public key ** (note not the address), so please distinguish between the following concepts in the following operation:
    * the public key
    * sign multiple addresses

### Set up the Bitcoin Trustee Node

1. To become a trust node, it is necessary to register as a verification node before setting up the trust. You can skip this step if you are already an authentication node.
2. Click on the asset trust -> to set the trust selection Bitcoin, and set the hot and cold public keys corresponding to its BTC address.

Eg:![set Up Trustee Node](https://github.com/chainx-org/images/blob/master/t1.png)

![Set Up Trust ](https://github.com/chainx-org/images/blob/master/t2.png)
When the trust is changed, the hot and cold multi-signature addresses will be generated according to the hot and cold public keys set by the nodes of the elected trust

5. Click the trust setting to set the address of the BTC node you trust (currently the BTC test network)

![Setting BTC node address ] (https://github.com/chainx-org/images/blob/master/t3.png)
The node address of BTC test network set up by ChainX is (provided in the group).

### The Trusee Bode processes withdrawal requests

** node processing withdrawal is essentially using the trust part of the ChainX wallet or the trust itself to form a Bitcoin multi-signature withdrawal, which is referred to as "pending signature text", which is transferred and signed between other trust nodes to become a multi-signature withdrawal transaction that can be executed and broadcast to the chain **

Therefore, the following two concepts are first defined:

1. **ChainX multi-signature withdrawal** : when a user withdrawal, withdrawal according to user's need to have a trust * * * * the original sign your assembly withdrawal and sent via ChainX trading to ChainX chain, other sign trust chain for withdrawal of the original and use your private key to sign, and then sent via ChainX trading on the chain, until a meet the conditions of the signature, after * * bitcoins Relay will automatically broadcast to this deal bitcoins network, without the node broadcasting deals * *
2. **Off-chain multi-signature transfer** : it has nothing to do with the processing process of ChainX, and is used for transferring cold and hot addresses, testing the validity of the next multi-signature address, etc. ** since there are few open source multi-signature wallets available, the trust needs to prepare its own multi-signature tools. * * (ChainX only to prepare a simple tool [ChainX - multisig - verify - script] (https://github.com/chainx-org/chainx-multisig-verify-script) for reference and testing)

Please note the following essence of this withdrawal process:

Whether the trust part of the ChainX wallet is used for multi-signature withdrawal or the node USES SDK to write multi-signature withdrawal application, the withdrawal from the current "hot address" (the transfer of funds from the "hot address") can only be carried out in the following two processes:

1. Execute the **Multi-signature cash withdrawal** process of ChainX, which guarantees that the withdrawal transaction of trust establishment is exactly corresponding to the withdrawal application of users.
2. Execute the **Chain multi-signature transfer** process, **which can only be transferred from the "hot address" to the "cold address"**, and cannot perform other transfer operations

If a transaction from the "hot address" is broadcast without the user's withdrawal assembly process and hot and cold conversion, it will be recognized by the ChainX as "there has been an unexpected transfer of funds (equivalent to a transfer of money without knowing its purpose)".

**This situation will trigger the abnormal withdrawal switch on the chain, resulting in the suspension of Bitcoin's cross-chain related business.** At this time, the "parliament" needs to step in to troubleshoot the problem, and find out the purpose of the fund transfer before the "parliament" can repair the corresponding storage, turn on the corresponding switch.

#### ChainX Withdraw Description (nodes written with SDK)

Bitcoin withdraw process:

![](https://github.com/chainx-org/images/blob/master/bitcoin_withdrawal.png)

1. User apply the bitcoin withdraw:
   * After the user applies for a withdrawal, a **unique** withdrawal application serial number is generated on the ChainX chain, called 'withdrawal_id'.
2. The trustee Node Operation
   `fee` user withdrawal fee, through RPC interface `chainx. Asset. GetWithdrawalLimitByToken (token)` available

    Trust through the RPC interface `chainx. Asset. GetWithdrawTx (chain)` into `bitcoins` monitoring chain `WithdrawalProposal` exists:
    
    1. Non-existent:
        * **any** Trustee through the RPC interface
            * `chainx.asset.getWithdrawalList(chain, page_index, page_size)`introduction`Bitcoin` Gets the current list of user withdrawals
            * `chainx.trustee.getTrusteeSessionInfo(chain)`introduction`Bitcoin`Gets the current Bitcoin trustee **热地址** Already corresponding`redeemScript`

        * Trustee according to the user withdrawal list of the corresponding information component withdrawal **multi-signature text**, the component is as follows:
            * By the RPC interface `chainx.Asset.GetWithdrawalList` (token), fill in the parameter ` BTC ` (note that not bitcoins, because this is for money not for chain) on the user access to current chainx withdrawal of fee of bitcoins ` fee `
            ** * select ** * the withdrawal record of the user that can withdraw this time (there is a maximum limit to prevent the Output from being too large, the current maximum is not more than 100), get the 'value' of the user's withdrawal and the withdrawal address 'addr', and set up the 'Output' of the withdrawal transaction.